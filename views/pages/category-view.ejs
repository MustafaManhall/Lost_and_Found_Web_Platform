<!DOCTYPE html>
<html lang="en">
  <%- include('../partials/header.ejs') %>
  <body>
    <%- include('../partials/nav.ejs') %>

    <style>
      .truncate {
        overflow: hidden;
        text-overflow: ellipsis;
        display: -webkit-box;
        -webkit-line-clamp: 3;
         /* Number of lines to show */
         line-clamp: 3;
        -webkit-box-orient: vertical;
      }
      .card-img-top {
        max-width: 100%; /* Set maximum width to 100% of its container */
        max-height: 300px; /* Set maximum height to 200 pixels */
        object-fit: cover; /* Ensure the image covers the container without stretching */
      }
    </style>

    <section class="mt-3 mb-2">
      <div class="container">
        
        <div class="row">
          <h3 class="col text-start" style="color: #27374d">
            <%= categoryName %>
          </h3>
          <a class="col nav-link text-end m-2" type="button" href="#" style="display: none;">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              fill="currentColor"
              class="bi bi-funnel"
              viewBox="0 0 16 16">
              <path
                d="M1.5 1.5A.5.5 0 0 1 2 1h12a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-.128.334L10 8.692V13.5a.5.5 0 0 1-.342.474l-3 1A.5.5 0 0 1 6 14.5V8.692L1.628 3.834A.5.5 0 0 1 1.5 3.5zm1 .5v1.308l4.372 4.858A.5.5 0 0 1 7 8.5v5.306l2-.666V8.5a.5.5 0 0 1 .128-.334L13.5 3.308V2z"/>
            </svg>
          </a>
        </div>

        <div class="row d-flex flex-wrap">
          <% for (let i = 0; i < posts.length; i++) { %>
          <% if (posts[i] != null) { %>
          <% if (posts[i].post_delete != 1) { %>
            <% if (i % 3 === 0) { %>
              <div class="w-100"></div> <!-- Add this to start a new row -->
            <% } %>

            <div class="col mt-3">
              <div class="card h-auto w-auto" style="border-radius: 24px">
                <img
                  src="../../<%= posts[i].post_image %>"
                  class="card-img-top h-75 p-3"
                  style="border-radius: 24px"
                  alt=""
                />
                <div class="card-body">
                  <h5 class="card-title" style="color: #27374d">
                    <span class="<%= posts[i].post_lorf === 'Lost' ? 'text-warning' : posts[i].post_lorf === 'Found' ? 'text-success' : 'text-secondary' %>
                      "> <%= posts[i].post_lorf %> : </span> <%= posts[i].post_title %>
                  </h5>
                  <p class="card-text truncate" style="color: #526d82">
                    <%= posts[i].post_des %>
                  </p>
                  <a href="/post/<%=posts[i].post_id%>" class="btn btn-dark">Learn more</a>
                </div>
              </div>
            </div>

          <% } } }%>
        </div>
      </div>
    </section>

    <%- include('../partials/footer.ejs') %>
  </body>
</html>
